# ğŸ”– YYCÂ³ Redisç¼“å­˜æœåŠ¡

> ***YanYuCloudCube***
> **æ ‡è¯­**ï¼šè¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **æ ‡è¯­**ï¼šä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| å±æ€§ | å†…å®¹ |
|------|------|
| **æœåŠ¡åç§°** | YYCÂ³ Redisç¼“å­˜æœåŠ¡ |
| **ç‰ˆæœ¬** | 1.0.0 |
| **åˆ›å»ºæ—¶é—´** | 2025-01-30 |
| **ä½œè€…** | YYCÂ³ Team |
| **è®¸å¯è¯** | MIT |

---

## ğŸ“– æ¦‚è¿°

YYCÂ³ Redisç¼“å­˜æœåŠ¡æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€åŠŸèƒ½ä¸°å¯Œçš„Redisç¼“å­˜å®¢æˆ·ç«¯ï¼Œä¸“ä¸ºé¤é¥®å¹³å°è®¾è®¡ã€‚å®ƒæä¾›äº†å¤šç§ç¼“å­˜ç­–ç•¥ã€åˆ†å±‚ç¼“å­˜ã€ç¼“å­˜é¢„çƒ­ã€åˆ†å¸ƒå¼é”ç­‰é«˜çº§åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾å®ç°é«˜æ•ˆçš„ç¼“å­˜ç®¡ç†ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **å¤šç§ç¼“å­˜ç­–ç•¥**ï¼šæ”¯æŒLRUã€LFUã€TTLã€æ ‡ç­¾å’Œåˆ†å±‚ç¼“å­˜ç­–ç•¥
- âœ… **åˆ†å±‚ç¼“å­˜**ï¼šæ”¯æŒå¤šçº§ç¼“å­˜ï¼Œè‡ªåŠ¨æå‡çƒ­ç‚¹æ•°æ®
- âœ… **ç¼“å­˜é¢„çƒ­**ï¼šæ”¯æŒæ‰¹é‡é¢„çƒ­ç¼“å­˜ï¼Œæå‡ç³»ç»Ÿå¯åŠ¨æ€§èƒ½
- âœ… **åˆ†å¸ƒå¼é”**ï¼šåŸºäºRediså®ç°çš„åˆ†å¸ƒå¼é”æœºåˆ¶
- âœ… **è£…é¥°å™¨æ”¯æŒ**ï¼šæä¾›è£…é¥°å™¨ç®€åŒ–ç¼“å­˜æ“ä½œ
- âœ… **æ ‡ç­¾ç®¡ç†**ï¼šæ”¯æŒæŒ‰æ ‡ç­¾æ‰¹é‡å¤±æ•ˆç¼“å­˜
- âœ… **ç»Ÿè®¡ç›‘æ§**ï¼šæä¾›è¯¦ç»†çš„ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
- âœ… **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- âœ… **æ—¥å¿—è®°å½•**ï¼šé›†æˆWinstonæ—¥å¿—ç³»ç»Ÿ
- âœ… **è¿æ¥æ± ç®¡ç†**ï¼šè‡ªåŠ¨ç®¡ç†Redisè¿æ¥

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **Redis**: 7.0+
- **ioredis**: 5.3.2
- **TypeScript**: 5.3.3
- **Winston**: 3.11.0
- **Lodash**: 4.17.21

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ (Application)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç¼“å­˜ç­–ç•¥ç®¡ç†å™¨ (CacheStrategyManager)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   LRU   â”‚  â”‚   LFU   â”‚  â”‚   TTL   â”‚  â”‚  Tagged â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            åˆ†å±‚ç¼“å­˜ç®¡ç†å™¨ (HierarchicalCacheManager)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   L1 Cache  â”‚  â”‚   L2 Cache  â”‚  â”‚   L3 Cache  â”‚          â”‚
â”‚  â”‚  (Memory)   â”‚  â”‚  (Redis)    â”‚  â”‚  (Database) â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Redisç¼“å­˜å®¢æˆ·ç«¯ (RedisCacheClient)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ è¿æ¥æ± ç®¡ç†   â”‚  â”‚ ç¼“å­˜æ“ä½œ    â”‚  â”‚ æ ‡ç­¾ç®¡ç†    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Redis Server                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
cd backend/services/redis-cache
pnpm install
```

### åŸºç¡€ä½¿ç”¨

```typescript
import { createCacheClient } from '@yyc3/redis-cache';

// åˆå§‹åŒ–ç¼“å­˜å®¢æˆ·ç«¯
const cacheClient = await createCacheClient({
  host: 'localhost',
  port: 6379,
  password: 'your-password',
  db: 0,
});

// è®¾ç½®ç¼“å­˜
await cacheClient.set('user:123', { name: 'å¼ ä¸‰', age: 30 }, { ttl: 3600 });

// è·å–ç¼“å­˜
const user = await cacheClient.get('user:123');
console.log(user); // { name: 'å¼ ä¸‰', age: 30 }

// åˆ é™¤ç¼“å­˜
await cacheClient.delete('user:123');

// å…³é—­è¿æ¥
await cacheClient.disconnect();
```

### ä½¿ç”¨ç¼“å­˜ç­–ç•¥

```typescript
import { createCacheClient, createCacheStrategyManager } from '@yyc3/redis-cache';

const cacheClient = await createCacheClient({
  host: 'localhost',
  port: 6379,
});

// åˆ›å»ºTTLç­–ç•¥ç®¡ç†å™¨
const strategyManager = createCacheStrategyManager(cacheClient, 'ttl');

// ä½¿ç”¨ç­–ç•¥è·å–ç¼“å­˜
const user = await strategyManager.get('user:123', async () => {
  // ç¼“å­˜æœªå‘½ä¸­æ—¶ï¼Œä»æ•°æ®åº“åŠ è½½
  return await database.getUser('123');
}, { ttl: 3600 });

console.log(user);
```

### ä½¿ç”¨è£…é¥°å™¨

```typescript
import { Cacheable, CacheEvict, createCacheClient, createCacheKeyGenerator } from '@yyc3/redis-cache';

const cacheClient = await createCacheClient({ host: 'localhost', port: 6379 });
const keyGenerator = createCacheKeyGenerator({ prefix: 'yyc3' });

class UserService {
  @Cacheable(cacheClient, keyGenerator, { ttl: 3600, keyPrefix: 'user' })
  async getUser(userId: string) {
    // è¿™ä¸ªæ–¹æ³•çš„ç»“æœä¼šè¢«ç¼“å­˜
    return await database.getUser(userId);
  }

  @CacheEvict(cacheClient, keyGenerator, { keyPrefix: 'user' })
  async updateUser(userId: string, data: any) {
    // æ›´æ–°ç”¨æˆ·åï¼Œæ¸…é™¤ç›¸å…³ç¼“å­˜
    return await database.updateUser(userId, data);
  }
}
```

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### 1. ç¼“å­˜ç­–ç•¥

#### TTLç­–ç•¥ï¼ˆåŸºäºæ—¶é—´çš„è¿‡æœŸï¼‰

```typescript
const ttlManager = createCacheStrategyManager(cacheClient, 'ttl', {
  defaultTTL: 3600, // é»˜è®¤1å°æ—¶
  refreshThreshold: 0.2, // TTLå‰©ä½™20%æ—¶è‡ªåŠ¨åˆ·æ–°
});

// è‡ªåŠ¨åˆ·æ–°ç¼“å­˜
const data = await ttlManager.get('key', async () => {
  return await fetchData();
});
```

#### LRUç­–ç•¥ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰

```typescript
const lruManager = createCacheStrategyManager(cacheClient, 'lru', {
  maxSize: 10000, // æœ€å¤§ç¼“å­˜10000ä¸ªé”®
});

// LRUè‡ªåŠ¨æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®
await lruManager.set('key', data);
```

#### LFUç­–ç•¥ï¼ˆæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼‰

```typescript
const lfuManager = createCacheStrategyManager(cacheClient, 'lfu', {
  maxSize: 10000,
});

// LFUè‡ªåŠ¨æ·˜æ±°è®¿é—®é¢‘ç‡æœ€ä½çš„æ•°æ®
await lfuManager.set('key', data);
```

#### æ ‡ç­¾ç­–ç•¥

```typescript
// è®¾ç½®å¸¦æ ‡ç­¾çš„ç¼“å­˜
await cacheClient.set('user:123', userData, {
  tags: ['user', 'profile'],
});

// æŒ‰æ ‡ç­¾æ‰¹é‡åˆ é™¤
await cacheClient.deleteByTags(['user']);
```

### 2. åˆ†å±‚ç¼“å­˜

```typescript
import { createHierarchicalCacheManager } from '@yyc3/redis-cache';

const hierarchicalManager = createHierarchicalCacheManager();

// æ·»åŠ L1ç¼“å­˜ï¼ˆå†…å­˜ï¼‰
hierarchicalManager.addLevel('L1', { strategy: 'lru', maxSize: 1000 }, l1CacheClient);

// æ·»åŠ L2ç¼“å­˜ï¼ˆRedisï¼‰
hierarchicalManager.addLevel('L2', { strategy: 'ttl', defaultTTL: 3600 }, l2CacheClient);

// è‡ªåŠ¨ä»L1 -> L2 -> æ•°æ®åº“æŸ¥æ‰¾
const data = await hierarchicalManager.get('key', async () => {
  return await database.get('key');
});
```

### 3. ç¼“å­˜é¢„çƒ­

```typescript
// é¢„çƒ­çƒ­é—¨èœå“
const warmupConfig = {
  keys: ['dish:1', 'dish:2', 'dish:3'],
  loader: async (key) => {
    return await database.getDish(key.split(':')[1]);
  },
  concurrency: 5,
};

await strategyManager.warmup(warmupConfig);
```

### 4. åˆ†å¸ƒå¼é”

```typescript
import { createCacheLock, createCacheKeyGenerator } from '@yyc3/redis-cache';

const lock = createCacheLock(cacheClient, keyGenerator);

// è·å–é”
const acquired = await lock.acquire('update-order:123', 30);
if (acquired) {
  try {
    // æ‰§è¡Œéœ€è¦åŠ é”çš„æ“ä½œ
    await updateOrder('123');
  } finally {
    // é‡Šæ”¾é”
    await lock.release('update-order:123');
  }
}

// æˆ–è€…ä½¿ç”¨withLockè‡ªåŠ¨ç®¡ç†é”
await lock.withLock('update-order:123', async () => {
  await updateOrder('123');
}, 30);
```

### 5. ç¼“å­˜é”®ç”Ÿæˆ

```typescript
import { createCacheKeyGenerator } from '@yyc3/redis-cache';

const keyGenerator = createCacheKeyGenerator({
  prefix: 'yyc3',
  separator: ':',
  version: 'v1',
});

// ç”Ÿæˆç”¨æˆ·ç¼“å­˜é”®
const userKey = keyGenerator.user('123', 'profile');
// yyc3:user:123:profile:v1

// ç”Ÿæˆè®¢å•ç¼“å­˜é”®
const orderKey = keyGenerator.order('456', 'status');
// yyc3:order:456:status:v1

// ç”Ÿæˆåˆ—è¡¨ç¼“å­˜é”®
const listKey = keyGenerator.list('dish', { page: 1, size: 10, category: 'hot' });
// yyc3:list:dish:abc123:v1
```

### 6. ç¼“å­˜ç»Ÿè®¡

```typescript
// è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
const stats = await strategyManager.getStatistics();
console.log(`
  å‘½ä¸­ç‡: ${(stats.hitRate * 100).toFixed(2)}%
  å‘½ä¸­æ¬¡æ•°: ${stats.hits}
  æœªå‘½ä¸­æ¬¡æ•°: ${stats.misses}
  æ·˜æ±°æ¬¡æ•°: ${stats.evictions}
  ç¼“å­˜å¤§å°: ${stats.size}
  å†…å­˜ä½¿ç”¨: ${stats.memoryUsage}
`);

// é‡ç½®ç»Ÿè®¡ä¿¡æ¯
strategyManager.resetStatistics();
```

---

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### ç¼“å­˜æ€§èƒ½æŒ‡æ ‡

- **å‘½ä¸­ç‡ (Hit Rate)**: ç¼“å­˜å‘½ä¸­æ¬¡æ•° / æ€»è®¿é—®æ¬¡æ•°
- **å“åº”æ—¶é—´ (Response Time)**: ç¼“å­˜æ“ä½œçš„å¹³å‡å“åº”æ—¶é—´
- **å†…å­˜ä½¿ç”¨ (Memory Usage)**: Rediså†…å­˜ä½¿ç”¨æƒ…å†µ
- **é”®æ•°é‡ (Key Count)**: å½“å‰ç¼“å­˜çš„é”®æ•°é‡
- **æ·˜æ±°æ¬¡æ•° (Evictions)**: ç¼“å­˜æ·˜æ±°çš„æ€»æ¬¡æ•°

### ç›‘æ§ç«¯ç‚¹

```typescript
// è·å–Prometheusæ ¼å¼çš„æŒ‡æ ‡
const metrics = await cacheClient.getPrometheusMetrics();
console.log(metrics);
```

---

## ğŸ”’ å®‰å…¨æ€§

### è¿æ¥å®‰å…¨

```typescript
const cacheClient = await createCacheClient({
  host: 'localhost',
  port: 6379,
  password: process.env.REDIS_PASSWORD, // ä½¿ç”¨ç¯å¢ƒå˜é‡
  db: 0,
  tls: {
    // å¯ç”¨TLSåŠ å¯†
    rejectUnauthorized: true,
  },
});
```

### é”®å‘½åå®‰å…¨

```typescript
// ä½¿ç”¨å‰ç¼€é¿å…é”®å†²çª
const keyGenerator = createCacheKeyGenerator({
  prefix: 'yyc3', // é¡¹ç›®å‰ç¼€
  version: 'v1', // ç‰ˆæœ¬å·
});
```

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage

# è¿è¡Œé›†æˆæµ‹è¯•
pnpm test:integration
```

### æµ‹è¯•ç¤ºä¾‹

```typescript
import { describe, it, expect, beforeEach, afterEach } from 'vitest';
import { createCacheClient } from '@yyc3/redis-cache';

describe('RedisCacheClient', () => {
  let cacheClient;

  beforeEach(async () => {
    cacheClient = await createCacheClient({
      host: 'localhost',
      port: 6379,
      db: 1, // ä½¿ç”¨æµ‹è¯•æ•°æ®åº“
    });
  });

  afterEach(async () => {
    await cacheClient.flushAll();
    await cacheClient.disconnect();
  });

  it('åº”è¯¥æˆåŠŸè®¾ç½®å’Œè·å–ç¼“å­˜', async () => {
    await cacheClient.set('test:key', 'test-value');
    const value = await cacheClient.get('test:key');
    expect(value).toBe('test-value');
  });

  it('åº”è¯¥æ­£ç¡®å¤„ç†TTLè¿‡æœŸ', async () => {
    await cacheClient.set('test:key', 'test-value', { ttl: 1 });
    const value1 = await cacheClient.get('test:key');
    expect(value1).toBe('test-value');

    await new Promise(resolve => setTimeout(resolve, 1100));
    const value2 = await cacheClient.get('test:key');
    expect(value2).toBeNull();
  });
});
```

---

## ğŸ“ é…ç½®è¯´æ˜

### Redisé…ç½®

```typescript
interface RedisConfig {
  host: string;              // Redisä¸»æœºåœ°å€
  port: number;              // Redisç«¯å£
  password?: string;         // Rediså¯†ç 
  db?: number;               // æ•°æ®åº“ç¼–å·
  tls?: any;                 // TLSé…ç½®
  keyPrefix?: string;        // é”®å‰ç¼€
  defaultTTL?: number;       // é»˜è®¤TTLï¼ˆç§’ï¼‰
  maxRetriesPerRequest?: number; // æœ€å¤§é‡è¯•æ¬¡æ•°
  lazyConnect?: boolean;     // æ˜¯å¦å»¶è¿Ÿè¿æ¥
  keepAlive?: number;        // ä¿æŒè¿æ¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
}
```

### ç¼“å­˜ç­–ç•¥é…ç½®

```typescript
interface CacheStrategyConfig {
  strategy: CacheStrategy;   // ç­–ç•¥ç±»å‹
  maxSize?: number;          // æœ€å¤§ç¼“å­˜æ•°é‡
  maxMemory?: number;        // æœ€å¤§å†…å­˜ä½¿ç”¨ï¼ˆMBï¼‰
  defaultTTL?: number;       // é»˜è®¤è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
  refreshThreshold?: number; // åˆ·æ–°é˜ˆå€¼ï¼ˆTTLçš„ç™¾åˆ†æ¯”ï¼‰
}
```

---

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. è¿æ¥å¤±è´¥

**é—®é¢˜**: æ— æ³•è¿æ¥åˆ°RedisæœåŠ¡å™¨

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥RedisæœåŠ¡æ˜¯å¦è¿è¡Œ: `redis-cli ping`
- æ£€æŸ¥ä¸»æœºåœ°å€å’Œç«¯å£é…ç½®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®

#### 2. å†…å­˜ä¸è¶³

**é—®é¢˜**: Rediså†…å­˜ä½¿ç”¨è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**:
- è®¾ç½®åˆç†çš„`maxMemory`é…ç½®
- ä½¿ç”¨LRUæˆ–LFUç­–ç•¥è‡ªåŠ¨æ·˜æ±°
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
- ä½¿ç”¨åˆ†å±‚ç¼“å­˜å‡å°‘Rediså‹åŠ›

#### 3. ç¼“å­˜ç©¿é€

**é—®é¢˜**: å¤§é‡è¯·æ±‚æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨
- ç¼“å­˜ç©ºå€¼ï¼ˆè®¾ç½®è¾ƒçŸ­çš„TTLï¼‰
- ä½¿ç”¨äº’æ–¥é”é˜²æ­¢ç¼“å­˜å‡»ç©¿

#### 4. ç¼“å­˜é›ªå´©

**é—®é¢˜**: å¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
- è®¾ç½®éšæœºçš„TTLåç§»é‡
- ä½¿ç”¨åˆ†å±‚ç¼“å­˜
- å®ç°ç¼“å­˜é¢„çƒ­æœºåˆ¶

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ä¼˜åŒ–å»ºè®®

1. **åˆç†è®¾ç½®TTL**: æ ¹æ®æ•°æ®æ›´æ–°é¢‘ç‡è®¾ç½®åˆé€‚çš„è¿‡æœŸæ—¶é—´
2. **ä½¿ç”¨æ‰¹é‡æ“ä½œ**: å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°
3. **é€‰æ‹©åˆé€‚çš„ç­–ç•¥**: æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©LRUã€LFUæˆ–TTLç­–ç•¥
4. **ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡**: å®šæœŸåˆ†æç¼“å­˜æ•ˆæœï¼Œè°ƒæ•´ç­–ç•¥
5. **ä½¿ç”¨Pipeline**: æ‰¹é‡æ‰§è¡Œå‘½ä»¤æå‡æ€§èƒ½

### æ€§èƒ½åŸºå‡†

| æ“ä½œ | QPS | å»¶è¿Ÿ (P99) |
|------|-----|-----------|
| SET | 100,000+ | < 1ms |
| GET | 150,000+ | < 1ms |
| MGET | 80,000+ | < 2ms |
| DELETE | 120,000+ | < 1ms |

---

## ğŸ”— èµ„æºé“¾æ¥

- **Rediså®˜æ–¹æ–‡æ¡£**: https://redis.io/documentation
- **ioredisæ–‡æ¡£**: https://github.com/luin/ioredis
- **YYCÂ³å›¢é˜Ÿæ–‡æ¡£**: https://github.com/YYC-Cube/docs

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **æŠ€æœ¯æ”¯æŒ**: <admin@0379.email>
- **é—®é¢˜åé¦ˆ**: GitHub Issues
- **æ–‡æ¡£æ›´æ–°**: <admin@0379.email>

---

## ğŸ“Œ å¤‡æ³¨

1. **ç‰ˆæœ¬ç®¡ç†**: æœ¬æœåŠ¡éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
2. **å…¼å®¹æ€§**: æ”¯æŒRedis 7.0+ç‰ˆæœ¬
3. **ç”Ÿäº§ç¯å¢ƒ**: å»ºè®®ä½¿ç”¨Redis Clusteræˆ–Sentinelä¿è¯é«˜å¯ç”¨
4. **ç›‘æ§**: å»ºè®®é›†æˆPrometheuså’ŒGrafanaè¿›è¡Œç›‘æ§

---

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€
